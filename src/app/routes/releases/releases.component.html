<section class="releases-page">
  <header class="stats">
    <app-stat-card title="Total Streams" [value]="totalStreams()" icon="🎧"></app-stat-card>
    <app-stat-card title="Active Releases" [value]="activeReleases()" icon="✅"></app-stat-card>
    <app-stat-card title="Pending Releases" [value]="pendingReleases()" icon="⏳"></app-stat-card>
  </header>

  <form (ngSubmit)="onSubmit()" [formGroup]="releaseForm" class="release-form">
    <input formControlName="title" placeholder="Release Title" />
    <input formControlName="releaseDate" type="date" />
    <input formControlName="coverUrl" placeholder="Cover URL (optional)" />

    <div class="form-actions">
      <button type="submit" [disabled]="releaseForm.invalid">
        {{ editedReleaseId() ? 'Update Release' : 'Create Release' }}
      </button>

      @if (editedReleaseId()) {
        <button type="button" class="secondary" (click)="cancelEdit()">Cancel</button>
      }
    </div>
  </form>

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (loading()) {
    <div>Loading releases...</div>
  }

  <app-release-list
    [releases]="releases()"
    (editRelease)="onEditRelease($event)">
  </app-release-list>
</section>
